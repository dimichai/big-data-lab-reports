{"paragraphs":[{"text":"%pyspark\r\nfrom pyspark.ml.recommendation import ALS\r\nfrom pyspark.sql import Row\r\n\r\n# load the training & test datasets...\r\ndef load(prefix):\r\n\tlines = spark.read.text(prefix).rdd\r\n\tparts = lines.map(lambda row: row.value.split(\"\\t\"))\r\n\tratingsRDD = parts.map(lambda p: Row(userId=int(p[0]), songId=int(p[1]), rating=float(p[2])))\r\n\treturn spark.createDataFrame(ratingsRDD).cache()\r\n\r\n","user":"anonymous","dateUpdated":"2019-03-01T12:09:39+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[]},"apps":[],"jobName":"paragraph_1551442172122_-1699930757","id":"20190225-100058_232890704","dateCreated":"2019-03-01T12:09:32+0000","dateStarted":"2019-03-01T12:09:39+0000","dateFinished":"2019-03-01T12:10:19+0000","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:5544"},{"text":"%pyspark\ntraining = load(\"s3://bads-music-dataset/train_9.txt.gz\")\ntest = load(\"s3://bads-music-dataset/test_9.txt.gz\")\n\n","user":"anonymous","dateUpdated":"2019-03-01T12:09:41+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[]},"runtimeInfos":{"jobUrl":{"propertyName":"jobUrl","label":"SPARK JOB","tooltip":"View in Spark web UI","group":"spark","values":["http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=0","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=1"],"interpreterSettingId":"spark"}},"apps":[],"jobName":"paragraph_1551442172127_1016358109","id":"20190225-100116_131521570","dateCreated":"2019-03-01T12:09:32+0000","dateStarted":"2019-03-01T12:09:44+0000","dateFinished":"2019-03-01T12:10:44+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:5545"},{"text":"%pyspark\ntraining.show(5)\ntest.show(5)","user":"anonymous","dateUpdated":"2019-03-01T12:09:43+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"+------+------+-------+\n|rating|songId| userId|\n+------+------+-------+\n|   5.0|    60|1800000|\n|   5.0|   128|1800000|\n|   5.0|   463|1800000|\n|   5.0|   545|1800000|\n|   1.0|   619|1800000|\n+------+------+-------+\nonly showing top 5 rows\n\n+------+------+-------+\n|rating|songId| userId|\n+------+------+-------+\n|   5.0| 16426|1800000|\n|   5.0| 17588|1800000|\n|   1.0| 27961|1800000|\n|   5.0| 43617|1800000|\n|   5.0| 62767|1800000|\n+------+------+-------+\nonly showing top 5 rows\n\n"}]},"runtimeInfos":{"jobUrl":{"propertyName":"jobUrl","label":"SPARK JOB","tooltip":"View in Spark web UI","group":"spark","values":["http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=2","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=3"],"interpreterSettingId":"spark"}},"apps":[],"jobName":"paragraph_1551442172128_-1014730507","id":"20190225-102721_285401244","dateCreated":"2019-03-01T12:09:32+0000","dateStarted":"2019-03-01T12:10:19+0000","dateFinished":"2019-03-01T12:14:32+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:5546"},{"text":"%pyspark\n# instantiate the ALS object\nals = ALS(maxIter=10, rank=10, userCol=\"userId\", itemCol=\"songId\", ratingCol=\"rating\", coldStartStrategy=\"drop\")","user":"anonymous","dateUpdated":"2019-03-01T12:09:51+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[]},"apps":[],"jobName":"paragraph_1551442172128_-367020187","id":"20190225-100122_1723216843","dateCreated":"2019-03-01T12:09:32+0000","dateStarted":"2019-03-01T12:10:44+0000","dateFinished":"2019-03-01T12:14:32+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:5547"},{"text":"%pyspark\nals.maxIter","user":"anonymous","dateUpdated":"2019-03-01T12:09:32+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"Param(parent=u'ALS_4992b123ef03082a0fa8', name='maxIter', doc='max number of iterations (>= 0).')\n"}]},"apps":[],"jobName":"paragraph_1551442172129_1685259014","id":"20190225-102531_1098979784","dateCreated":"2019-03-01T12:09:32+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:5548"},{"text":"%pyspark\n# train the model over the training dataset\nmodel = als.fit(training)","user":"anonymous","dateUpdated":"2019-03-01T12:09:32+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[]},"apps":[],"jobName":"paragraph_1551442172129_-2145688607","id":"20190225-100241_1243711490","dateCreated":"2019-03-01T12:09:32+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:5549"},{"text":"%pyspark\n# predict the ratings on the testing dataset\npredictions = model.transform(test)\n","user":"anonymous","dateUpdated":"2019-03-01T12:09:32+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[]},"apps":[],"jobName":"paragraph_1551442172130_1873203244","id":"20190225-100248_2087737988","dateCreated":"2019-03-01T12:09:32+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:5550"},{"text":"%pyspark\npredictions.show()","user":"anonymous","dateUpdated":"2019-03-01T12:09:32+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"+------+------+-------+----------+\n|rating|songId| userId|prediction|\n+------+------+-------+----------+\n|   5.0|   463|1815166|  2.888059|\n|   3.0|   833|1813256| 3.2098815|\n|   5.0|   833|1817909| 4.1784368|\n|   3.0|   833|1800481| 4.0643415|\n|   5.0|   833|1811899|  4.095453|\n|   5.0|   833|1819922| 4.5713453|\n|   4.0|   833|1809364| 3.7969408|\n|   2.0|   833|1808376| 3.3503048|\n|   4.0|   833|1817676| 3.9708369|\n|   3.0|   833|1813911| 2.6531289|\n|   3.0|   833|1800627|   3.66482|\n|   5.0|   833|1804458| 5.0044456|\n|   5.0|   833|1822594|  3.577437|\n|   5.0|   833|1801787| 3.3169506|\n|   5.0|   833|1812048| 3.2256527|\n|   3.0|   833|1819438| 3.4241526|\n|   5.0|   833|1822170| 3.5990071|\n|   1.0|   833|1801390| 2.9619217|\n|   5.0|   833|1807941| 3.7385952|\n|   2.0|   833|1820246| 1.7667067|\n+------+------+-------+----------+\nonly showing top 20 rows\n\n"}]},"apps":[],"jobName":"paragraph_1551442172130_-1670005835","id":"20190225-101234_1944966185","dateCreated":"2019-03-01T12:09:32+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:5551"},{"text":"%pyspark\n# Find the root mean square error (RMSE) of the predictions over the given \n# ratings in the training set\nfrom pyspark.ml.evaluation import RegressionEvaluator\n# ...\nrmse = RegressionEvaluator(metricName=\"rmse\", labelCol=\"rating\",\n                                predictionCol=\"prediction\")\nprint(\"Root mean square error = \" + str(rmse.evaluate(predictions)))\n","user":"anonymous","dateUpdated":"2019-03-01T12:09:32+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"Root mean square error = 1.14495781844\n"}]},"apps":[],"jobName":"paragraph_1551442172130_-887098754","id":"20190225-101014_14994559","dateCreated":"2019-03-01T12:09:32+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:5552"},{"text":"%md\n# Grid Search\n","user":"anonymous","dateUpdated":"2019-03-01T12:09:32+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<h1>Grid Search</h1>\n</div>"}]},"apps":[],"jobName":"paragraph_1551442172131_1823323198","id":"20190225-102709_1801289521","dateCreated":"2019-03-01T12:09:32+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:5553"},{"text":"%md\n### Rank","user":"anonymous","dateUpdated":"2019-03-01T12:09:32+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<h3>Rank</h3>\n</div>"}]},"apps":[],"jobName":"paragraph_1551442172131_-188309401","id":"20190226-115015_1349463435","dateCreated":"2019-03-01T12:09:32+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:5554"},{"text":"%pyspark\nfrom pyspark.ml.tuning import ParamGridBuilder, TrainValidationSplit\nparamGrid = ParamGridBuilder()\\\n    .addGrid(als.rank, [2,5,10,15,20]) \\\n    .build()\n        #.addGrid(als.maxIter , [10,50,100])\\\n\n#    ) \\\n","user":"anonymous","dateUpdated":"2019-03-01T12:09:32+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[]},"apps":[],"jobName":"paragraph_1551442172132_-1565936801","id":"20190225-101458_1798031828","dateCreated":"2019-03-01T12:09:32+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:5555"},{"text":"%pyspark\ntvs = TrainValidationSplit(estimator=als,\n                           estimatorParamMaps=paramGrid,\n                           evaluator=rmse,\n                           # 80% of the data will be used for training, 20% for validation.\n                           trainRatio=0.8)","user":"anonymous","dateUpdated":"2019-03-01T12:09:32+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[]},"apps":[],"jobName":"paragraph_1551442172132_-1575413530","id":"20190225-102739_1117778959","dateCreated":"2019-03-01T12:09:32+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:5556"},{"text":"%pyspark\nmodel = tvs.fit(training)","user":"anonymous","dateUpdated":"2019-03-01T12:09:32+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[]},"apps":[],"jobName":"paragraph_1551442172133_-172717696","id":"20190225-102802_1693329184","dateCreated":"2019-03-01T12:09:32+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:5557"},{"text":"%pyspark\nmodel.validationMetrics","user":"anonymous","dateUpdated":"2019-03-01T12:09:32+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"[1.2255796511677142, 1.1713309592402645, 1.142693800122639, 1.1363575729117512, 1.1297209552629879]\n"}]},"apps":[],"jobName":"paragraph_1551442172133_2110905424","id":"20190226-103526_1579698655","dateCreated":"2019-03-01T12:09:32+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:5558"},{"text":"%pyspark\nfor i in paramGrid:\n    print(i)","user":"anonymous","dateUpdated":"2019-03-01T12:09:32+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"{Param(parent=u'ALS_4992b123ef03082a0fa8', name='rank', doc='rank of the factorization'): 2}\n{Param(parent=u'ALS_4992b123ef03082a0fa8', name='rank', doc='rank of the factorization'): 5}\n{Param(parent=u'ALS_4992b123ef03082a0fa8', name='rank', doc='rank of the factorization'): 10}\n{Param(parent=u'ALS_4992b123ef03082a0fa8', name='rank', doc='rank of the factorization'): 15}\n{Param(parent=u'ALS_4992b123ef03082a0fa8', name='rank', doc='rank of the factorization'): 20}\n"}]},"apps":[],"jobName":"paragraph_1551442172134_1722551998","id":"20190226-105729_2145683406","dateCreated":"2019-03-01T12:09:32+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:5559"},{"text":"%pyspark\nparams = [{p.name: v for p, v in m.items()} for m in model.getEstimatorParamMaps()]\nparams","user":"anonymous","dateUpdated":"2019-03-01T12:09:32+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"[{'rank': 2}, {'rank': 5}, {'rank': 10}, {'rank': 15}, {'rank': 20}]\n"}]},"apps":[],"jobName":"paragraph_1551442172134_1906853758","id":"20190226-105759_177850409","dateCreated":"2019-03-01T12:09:32+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:5560"},{"text":"%pyspark\nfor i,ii in zip(model.validationMetrics, paramGrid):\n    print(i,\"|\",ii)","user":"anonymous","dateUpdated":"2019-03-01T12:09:32+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"(1.2255796511677142, '|', {Param(parent=u'ALS_4992b123ef03082a0fa8', name='rank', doc='rank of the factorization'): 2})\n(1.1713309592402645, '|', {Param(parent=u'ALS_4992b123ef03082a0fa8', name='rank', doc='rank of the factorization'): 5})\n(1.142693800122639, '|', {Param(parent=u'ALS_4992b123ef03082a0fa8', name='rank', doc='rank of the factorization'): 10})\n(1.1363575729117512, '|', {Param(parent=u'ALS_4992b123ef03082a0fa8', name='rank', doc='rank of the factorization'): 15})\n(1.1297209552629879, '|', {Param(parent=u'ALS_4992b123ef03082a0fa8', name='rank', doc='rank of the factorization'): 20})\n"}]},"apps":[],"jobName":"paragraph_1551442172135_1251563405","id":"20190225-104000_102083695","dateCreated":"2019-03-01T12:09:32+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:5561"},{"text":"%pyspark\n\\.transform(test)","user":"anonymous","dateUpdated":"2019-03-01T12:09:32+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"ERROR","msg":[{"type":"TEXT","data":"Traceback (most recent call last):\n  File \"/tmp/zeppelin_pyspark-2395100223084959636.py\", line 364, in <module>\n    code = compile('\\n'.join(stmts), '<stdin>', 'exec', ast.PyCF_ONLY_AST, 1)\n  File \"<stdin>\", line 1\n    \\.transform(test)\n                    ^\nSyntaxError: unexpected character after line continuation character\n"}]},"apps":[],"jobName":"paragraph_1551442172136_-1414211461","id":"20190225-102920_53522624","dateCreated":"2019-03-01T12:09:32+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:5562"},{"text":"%md\n## maxitr\n","user":"anonymous","dateUpdated":"2019-03-01T12:09:32+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<h2>maxitr</h2>\n</div>"}]},"apps":[],"jobName":"paragraph_1551442172136_614756249","id":"20190226-115028_474102590","dateCreated":"2019-03-01T12:09:32+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:5563"},{"text":"%pyspark\nfrom pyspark.ml.evaluation import RegressionEvaluator\n\nfrom pyspark.ml.tuning import ParamGridBuilder, TrainValidationSplit\nparamGrid = ParamGridBuilder()\\\n    .addGrid(als.maxIter , [1,2,3,4,5,6,7,8,9,10])\\\n    .build()\n    \nrmse = RegressionEvaluator(metricName=\"rmse\", labelCol=\"rating\",\n                                predictionCol=\"prediction\")\n\n    \ntvs = TrainValidationSplit(estimator=als,\n                           estimatorParamMaps=paramGrid,\n                           evaluator=rmse,\n                           # 80% of the data will be used for training, 20% for validation.\n                           trainRatio=0.8)   \n                           \nmodel = tvs.fit(training)","user":"anonymous","dateUpdated":"2019-03-01T12:09:32+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[]},"apps":[],"jobName":"paragraph_1551442172137_-1673840351","id":"20190226-120436_1972407510","dateCreated":"2019-03-01T12:09:32+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:5564"},{"text":"%pyspark\n\nfor i,ii in zip(model.validationMetrics, paramGrid):\n    print(i,\"|\",ii)","user":"anonymous","dateUpdated":"2019-03-01T12:09:32+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"(3.460114485320345, '|', {Param(parent=u'ALS_46dfbf852c07bb52cf26', name='maxIter', doc='max number of iterations (>= 0).'): 1})\n(1.3253670257019066, '|', {Param(parent=u'ALS_46dfbf852c07bb52cf26', name='maxIter', doc='max number of iterations (>= 0).'): 2})\n(1.1774236937808729, '|', {Param(parent=u'ALS_46dfbf852c07bb52cf26', name='maxIter', doc='max number of iterations (>= 0).'): 3})\n(1.1611929457197976, '|', {Param(parent=u'ALS_46dfbf852c07bb52cf26', name='maxIter', doc='max number of iterations (>= 0).'): 4})\n(1.153436849348142, '|', {Param(parent=u'ALS_46dfbf852c07bb52cf26', name='maxIter', doc='max number of iterations (>= 0).'): 5})\n(1.1490859466450285, '|', {Param(parent=u'ALS_46dfbf852c07bb52cf26', name='maxIter', doc='max number of iterations (>= 0).'): 6})\n(1.146425988066404, '|', {Param(parent=u'ALS_46dfbf852c07bb52cf26', name='maxIter', doc='max number of iterations (>= 0).'): 7})\n(1.1446948858092065, '|', {Param(parent=u'ALS_46dfbf852c07bb52cf26', name='maxIter', doc='max number of iterations (>= 0).'): 8})\n(1.1435177453304664, '|', {Param(parent=u'ALS_46dfbf852c07bb52cf26', name='maxIter', doc='max number of iterations (>= 0).'): 9})\n(1.142693800122639, '|', {Param(parent=u'ALS_46dfbf852c07bb52cf26', name='maxIter', doc='max number of iterations (>= 0).'): 10})\n"}]},"apps":[],"jobName":"paragraph_1551442172137_-2049935758","id":"20190226-115150_732259784","dateCreated":"2019-03-01T12:09:32+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:5565"},{"text":"%md\n## Time Running","user":"anonymous","dateUpdated":"2019-03-01T12:10:08+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<h2>Time Running</h2>\n</div>"}]},"apps":[],"jobName":"paragraph_1551442172138_-169209590","id":"20190225-103418_585321352","dateCreated":"2019-03-01T12:09:32+0000","dateStarted":"2019-03-01T12:10:08+0000","dateFinished":"2019-03-01T12:10:11+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:5566"},{"text":"%pyspark\ntraining.count()\ntest.count()","user":"anonymous","dateUpdated":"2019-03-01T12:15:15+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"231790\n"}]},"runtimeInfos":{"jobUrl":{"propertyName":"jobUrl","label":"SPARK JOB","tooltip":"View in Spark web UI","group":"spark","values":["http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=4","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=5"],"interpreterSettingId":"spark"}},"apps":[],"jobName":"paragraph_1551442172139_952726678","id":"20190225-103432_880808310","dateCreated":"2019-03-01T12:09:32+0000","dateStarted":"2019-03-01T12:15:15+0000","dateFinished":"2019-03-01T12:15:15+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:5567"},{"text":"%pyspark\nimport time \ntimes = []\nfor rank in [2,5,10,15,20]:\n    \n    als = ALS(maxIter=10, rank=rank, userCol=\"userId\", itemCol=\"songId\", ratingCol=\"rating\", coldStartStrategy=\"drop\")\n    start = time.time()\n    als.fit(training)\n    end = time.time()\n    \n    elapse = end - start\n    times.append(elapse)","user":"anonymous","dateUpdated":"2019-03-01T12:17:59+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"editorMode":"ace/mode/python"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"ALS_42cdafb55421f07dea1d\nALS_4adcbfc3c02d63d42b2f\nALS_4a91a43b53e72485b7ba\nALS_49af8430d035bfb6bdfd\nALS_4ffca6cce22c7e7b7dde\n"}]},"runtimeInfos":{"jobUrl":{"propertyName":"jobUrl","label":"SPARK JOB","tooltip":"View in Spark web UI","group":"spark","values":["http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=11","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=12","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=13","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=14","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=15","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=16","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=17","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=18","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=19","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=20","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=21","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=22","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=23","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=24","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=25","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=26","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=27","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=28","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=29","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=30","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=31","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=32","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=33","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=34","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=35"],"interpreterSettingId":"spark"}},"apps":[],"jobName":"paragraph_1551442224101_1463297640","id":"20190301-121024_1889203978","dateCreated":"2019-03-01T12:10:24+0000","dateStarted":"2019-03-01T12:17:59+0000","dateFinished":"2019-03-01T12:24:09+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:5568"},{"text":"%pyspark\ntimes","user":"anonymous","dateUpdated":"2019-03-01T12:24:32+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"editorMode":"ace/mode/python"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"[56.31207203865051, 63.16633701324463, 67.9649760723114, 83.19458389282227, 99.27981400489807]\n"}]},"apps":[],"jobName":"paragraph_1551442554052_-1855530198","id":"20190301-121554_1047469001","dateCreated":"2019-03-01T12:15:54+0000","dateStarted":"2019-03-01T12:24:32+0000","dateFinished":"2019-03-01T12:24:32+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:5569"},{"text":"%pyspark\nimport time \ntimes_maxitr = []\nfor max_itr in [1,2,3,4,5,6,7,8,9,10]:\n    \n    als = ALS(maxIter=max_itr, rank=10, userCol=\"userId\", itemCol=\"songId\", ratingCol=\"rating\", coldStartStrategy=\"drop\")\n    start = time.time()\n    als.fit(training)\n    end = time.time()\n    \n    elapse = end - start\n    times_maxitr.append(elapse)\n    \ntimes_maxitr","user":"anonymous","dateUpdated":"2019-03-01T12:25:30+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"editorMode":"ace/mode/python"},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"[21.29847502708435, 24.48975896835327, 30.674889087677002, 34.82848501205444, 41.23953700065613, 44.618579149246216, 49.08176302909851, 55.074766874313354, 61.417627811431885, 66.36367607116699]\n"}]},"runtimeInfos":{"jobUrl":{"propertyName":"jobUrl","label":"SPARK JOB","tooltip":"View in Spark web UI","group":"spark","values":["http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=36","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=37","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=38","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=39","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=40","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=41","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=42","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=43","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=44","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=45","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=46","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=47","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=48","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=49","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=50","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=51","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=52","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=53","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=54","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=55","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=56","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=57","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=58","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=59","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=60","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=61","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=62","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=63","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=64","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=65","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=66","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=67","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=68","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=69","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=70","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=71","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=72","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=73","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=74","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=75","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=76","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=77","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=78","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=79","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=80","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=81","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=82","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=83","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=84","http://ip-172-31-32-16.ec2.internal:4040/jobs/job?id=85"],"interpreterSettingId":"spark"}},"apps":[],"jobName":"paragraph_1551443062225_-583598860","id":"20190301-122422_2078219741","dateCreated":"2019-03-01T12:24:22+0000","dateStarted":"2019-03-01T12:25:30+0000","dateFinished":"2019-03-01T12:32:40+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:5570"},{"text":"%pyspark\n","user":"anonymous","dateUpdated":"2019-03-01T12:25:22+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"editorMode":"ace/mode/python"},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1551443122717_907066774","id":"20190301-122522_1956178213","dateCreated":"2019-03-01T12:25:22+0000","status":"READY","progressUpdateIntervalMs":500,"$$hashKey":"object:5571"}],"name":"ml","id":"2E5Q86ZT4","noteParams":{},"noteForms":{},"angularObjects":{"md:shared_process":[],"spark:shared_process":[]},"config":{"isZeppelinNotebookCronEnable":false,"looknfeel":"default","personalizedMode":"false"},"info":{}}