{"paragraphs":[{"text":"%pyspark\r\nfrom pyspark.ml.recommendation import ALS\r\nfrom pyspark.sql import Row\r\n\r\n# load the training & test datasets...\r\ndef load(prefix):\r\n\tlines = spark.read.text(prefix).rdd\r\n\tparts = lines.map(lambda row: row.value.split(\"\\t\"))\r\n\tratingsRDD = parts.map(lambda p: Row(userId=int(p[0]), songId=int(p[1]), rating=float(p[2])))\r\n\treturn spark.createDataFrame(ratingsRDD).cache()\r\n\r\n","user":"anonymous","dateUpdated":"2019-02-26T11:40:46+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[]},"apps":[],"jobName":"paragraph_1551181218337_-1318206266","id":"20190225-100058_232890704","dateCreated":"2019-02-26T11:40:18+0000","dateStarted":"2019-02-26T11:40:46+0000","dateFinished":"2019-02-26T11:41:22+0000","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:172"},{"text":"%pyspark\ntraining = load(\"s3://bads-music-dataset/train_9.txt.gz\")\ntest = load(\"s3://bads-music-dataset/test_9.txt.gz\")\n\n","user":"anonymous","dateUpdated":"2019-02-26T11:41:23+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[]},"runtimeInfos":{"jobUrl":{"propertyName":"jobUrl","label":"SPARK JOB","tooltip":"View in Spark web UI","group":"spark","values":["http://ip-172-31-34-28.ec2.internal:4040/jobs/job?id=0","http://ip-172-31-34-28.ec2.internal:4040/jobs/job?id=1"],"interpreterSettingId":"spark"}},"apps":[],"jobName":"paragraph_1551181218343_1167269006","id":"20190225-100116_131521570","dateCreated":"2019-02-26T11:40:18+0000","dateStarted":"2019-02-26T11:41:23+0000","dateFinished":"2019-02-26T11:41:48+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:173"},{"text":"%pyspark\ntraining.show(5)\ntest.show(5)","user":"anonymous","dateUpdated":"2019-02-26T11:41:48+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"+------+------+-------+\n|rating|songId| userId|\n+------+------+-------+\n|   5.0|    60|1800000|\n|   5.0|   128|1800000|\n|   5.0|   463|1800000|\n|   5.0|   545|1800000|\n|   1.0|   619|1800000|\n+------+------+-------+\nonly showing top 5 rows\n\n+------+------+-------+\n|rating|songId| userId|\n+------+------+-------+\n|   5.0| 16426|1800000|\n|   5.0| 17588|1800000|\n|   1.0| 27961|1800000|\n|   5.0| 43617|1800000|\n|   5.0| 62767|1800000|\n+------+------+-------+\nonly showing top 5 rows\n\n"}]},"runtimeInfos":{"jobUrl":{"propertyName":"jobUrl","label":"SPARK JOB","tooltip":"View in Spark web UI","group":"spark","values":["http://ip-172-31-34-28.ec2.internal:4040/jobs/job?id=2","http://ip-172-31-34-28.ec2.internal:4040/jobs/job?id=3"],"interpreterSettingId":"spark"}},"apps":[],"jobName":"paragraph_1551181218344_1743117610","id":"20190225-102721_285401244","dateCreated":"2019-02-26T11:40:18+0000","dateStarted":"2019-02-26T11:41:48+0000","dateFinished":"2019-02-26T11:45:33+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:174"},{"text":"%pyspark\n# instantiate the ALS object\nals = ALS(maxIter=10, rank=10, userCol=\"userId\", itemCol=\"songId\", ratingCol=\"rating\", coldStartStrategy=\"drop\")","user":"anonymous","dateUpdated":"2019-02-26T11:45:33+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[]},"apps":[],"jobName":"paragraph_1551181218344_-460894979","id":"20190225-100122_1723216843","dateCreated":"2019-02-26T11:40:18+0000","dateStarted":"2019-02-26T11:45:33+0000","dateFinished":"2019-02-26T11:45:33+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:175"},{"text":"%pyspark\nals.maxIter","user":"anonymous","dateUpdated":"2019-02-26T11:45:33+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"Param(parent=u'ALS_4992b123ef03082a0fa8', name='maxIter', doc='max number of iterations (>= 0).')\n"}]},"apps":[],"jobName":"paragraph_1551181218345_2038185752","id":"20190225-102531_1098979784","dateCreated":"2019-02-26T11:40:18+0000","dateStarted":"2019-02-26T11:45:34+0000","dateFinished":"2019-02-26T11:45:34+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:176"},{"text":"%pyspark\n# train the model over the training dataset\nmodel = als.fit(training)","user":"anonymous","dateUpdated":"2019-02-26T11:45:34+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[]},"runtimeInfos":{"jobUrl":{"propertyName":"jobUrl","label":"SPARK JOB","tooltip":"View in Spark web UI","group":"spark","values":["http://ip-172-31-34-28.ec2.internal:4040/jobs/job?id=4","http://ip-172-31-34-28.ec2.internal:4040/jobs/job?id=5","http://ip-172-31-34-28.ec2.internal:4040/jobs/job?id=6","http://ip-172-31-34-28.ec2.internal:4040/jobs/job?id=7","http://ip-172-31-34-28.ec2.internal:4040/jobs/job?id=8"],"interpreterSettingId":"spark"}},"apps":[],"jobName":"paragraph_1551181218345_660986948","id":"20190225-100241_1243711490","dateCreated":"2019-02-26T11:40:18+0000","dateStarted":"2019-02-26T11:45:34+0000","dateFinished":"2019-02-26T11:46:26+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:177"},{"text":"%pyspark\n# predict the ratings on the testing dataset\npredictions = model.transform(test)\n","user":"anonymous","dateUpdated":"2019-02-26T11:46:26+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[]},"apps":[],"jobName":"paragraph_1551181218346_1795154860","id":"20190225-100248_2087737988","dateCreated":"2019-02-26T11:40:18+0000","dateStarted":"2019-02-26T11:46:27+0000","dateFinished":"2019-02-26T11:46:27+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:178"},{"text":"%pyspark\npredictions.show()","user":"anonymous","dateUpdated":"2019-02-26T11:46:27+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"+------+------+-------+----------+\n|rating|songId| userId|prediction|\n+------+------+-------+----------+\n|   5.0|   463|1815166|  2.888059|\n|   3.0|   833|1813256| 3.2098815|\n|   5.0|   833|1817909| 4.1784368|\n|   3.0|   833|1800481| 4.0643415|\n|   5.0|   833|1811899|  4.095453|\n|   5.0|   833|1819922| 4.5713453|\n|   4.0|   833|1809364| 3.7969408|\n|   2.0|   833|1808376| 3.3503048|\n|   4.0|   833|1817676| 3.9708369|\n|   3.0|   833|1813911| 2.6531289|\n|   3.0|   833|1800627|   3.66482|\n|   5.0|   833|1804458| 5.0044456|\n|   5.0|   833|1822594|  3.577437|\n|   5.0|   833|1801787| 3.3169506|\n|   5.0|   833|1812048| 3.2256527|\n|   3.0|   833|1819438| 3.4241526|\n|   5.0|   833|1822170| 3.5990071|\n|   1.0|   833|1801390| 2.9619217|\n|   5.0|   833|1807941| 3.7385952|\n|   2.0|   833|1820246| 1.7667067|\n+------+------+-------+----------+\nonly showing top 20 rows\n\n"}]},"runtimeInfos":{"jobUrl":{"propertyName":"jobUrl","label":"SPARK JOB","tooltip":"View in Spark web UI","group":"spark","values":["http://ip-172-31-34-28.ec2.internal:4040/jobs/job?id=9"],"interpreterSettingId":"spark"}},"apps":[],"jobName":"paragraph_1551181218346_-1755567175","id":"20190225-101234_1944966185","dateCreated":"2019-02-26T11:40:18+0000","dateStarted":"2019-02-26T11:46:27+0000","dateFinished":"2019-02-26T11:46:38+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:179"},{"text":"%pyspark\n# Find the root mean square error (RMSE) of the predictions over the given \n# ratings in the training set\nfrom pyspark.ml.evaluation import RegressionEvaluator\n# ...\nrmse = RegressionEvaluator(metricName=\"rmse\", labelCol=\"rating\",\n                                predictionCol=\"prediction\")\nprint(\"Root mean square error = \" + str(rmse.evaluate(predictions)))\n","user":"anonymous","dateUpdated":"2019-02-26T11:46:38+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"Root mean square error = 1.14495781844\n"}]},"runtimeInfos":{"jobUrl":{"propertyName":"jobUrl","label":"SPARK JOB","tooltip":"View in Spark web UI","group":"spark","values":["http://ip-172-31-34-28.ec2.internal:4040/jobs/job?id=10"],"interpreterSettingId":"spark"}},"apps":[],"jobName":"paragraph_1551181218347_-2030361316","id":"20190225-101014_14994559","dateCreated":"2019-02-26T11:40:18+0000","dateStarted":"2019-02-26T11:46:38+0000","dateFinished":"2019-02-26T11:47:03+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:180"},{"text":"%md\n# Grid Search\n","user":"anonymous","dateUpdated":"2019-02-26T11:47:03+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<h1>Grid Search</h1>\n</div>"}]},"apps":[],"jobName":"paragraph_1551181218348_218769521","id":"20190225-102709_1801289521","dateCreated":"2019-02-26T11:40:18+0000","dateStarted":"2019-02-26T11:47:03+0000","dateFinished":"2019-02-26T11:47:06+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:181"},{"text":"%md\n### Rank","user":"anonymous","dateUpdated":"2019-02-26T11:50:21+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"editorMode":"ace/mode/markdown","editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<h3>Rank</h3>\n</div>"}]},"apps":[],"jobName":"paragraph_1551181815637_-409781979","id":"20190226-115015_1349463435","dateCreated":"2019-02-26T11:50:15+0000","dateStarted":"2019-02-26T11:50:21+0000","dateFinished":"2019-02-26T11:50:21+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:182"},{"text":"%pyspark\nfrom pyspark.ml.tuning import ParamGridBuilder, TrainValidationSplit\nparamGrid = ParamGridBuilder()\\\n    .addGrid(als.rank, [2,5,10,15,20]) \\\n    .build()\n        #.addGrid(als.maxIter , [10,50,100])\\\n\n#    ) \\\n","user":"anonymous","dateUpdated":"2019-02-26T11:47:06+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[]},"apps":[],"jobName":"paragraph_1551181218348_920237502","id":"20190225-101458_1798031828","dateCreated":"2019-02-26T11:40:18+0000","dateStarted":"2019-02-26T11:47:06+0000","dateFinished":"2019-02-26T11:47:06+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:183"},{"text":"%pyspark\ntvs = TrainValidationSplit(estimator=als,\n                           estimatorParamMaps=paramGrid,\n                           evaluator=rmse,\n                           # 80% of the data will be used for training, 20% for validation.\n                           trainRatio=0.8)","user":"anonymous","dateUpdated":"2019-02-26T11:47:06+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[]},"apps":[],"jobName":"paragraph_1551181218349_-270834641","id":"20190225-102739_1117778959","dateCreated":"2019-02-26T11:40:18+0000","dateStarted":"2019-02-26T11:47:06+0000","dateFinished":"2019-02-26T11:47:06+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:184"},{"text":"%pyspark\nmodel = tvs.fit(training)","user":"anonymous","dateUpdated":"2019-02-26T11:47:06+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[]},"runtimeInfos":{"jobUrl":{"propertyName":"jobUrl","label":"SPARK JOB","tooltip":"View in Spark web UI","group":"spark","values":["http://ip-172-31-34-28.ec2.internal:4040/jobs/job?id=11","http://ip-172-31-34-28.ec2.internal:4040/jobs/job?id=12","http://ip-172-31-34-28.ec2.internal:4040/jobs/job?id=13","http://ip-172-31-34-28.ec2.internal:4040/jobs/job?id=14","http://ip-172-31-34-28.ec2.internal:4040/jobs/job?id=15","http://ip-172-31-34-28.ec2.internal:4040/jobs/job?id=16","http://ip-172-31-34-28.ec2.internal:4040/jobs/job?id=17","http://ip-172-31-34-28.ec2.internal:4040/jobs/job?id=18","http://ip-172-31-34-28.ec2.internal:4040/jobs/job?id=19","http://ip-172-31-34-28.ec2.internal:4040/jobs/job?id=20","http://ip-172-31-34-28.ec2.internal:4040/jobs/job?id=21","http://ip-172-31-34-28.ec2.internal:4040/jobs/job?id=22","http://ip-172-31-34-28.ec2.internal:4040/jobs/job?id=23","http://ip-172-31-34-28.ec2.internal:4040/jobs/job?id=24","http://ip-172-31-34-28.ec2.internal:4040/jobs/job?id=25","http://ip-172-31-34-28.ec2.internal:4040/jobs/job?id=26","http://ip-172-31-34-28.ec2.internal:4040/jobs/job?id=27","http://ip-172-31-34-28.ec2.internal:4040/jobs/job?id=28","http://ip-172-31-34-28.ec2.internal:4040/jobs/job?id=29","http://ip-172-31-34-28.ec2.internal:4040/jobs/job?id=30","http://ip-172-31-34-28.ec2.internal:4040/jobs/job?id=31","http://ip-172-31-34-28.ec2.internal:4040/jobs/job?id=32","http://ip-172-31-34-28.ec2.internal:4040/jobs/job?id=33","http://ip-172-31-34-28.ec2.internal:4040/jobs/job?id=34","http://ip-172-31-34-28.ec2.internal:4040/jobs/job?id=35","http://ip-172-31-34-28.ec2.internal:4040/jobs/job?id=36","http://ip-172-31-34-28.ec2.internal:4040/jobs/job?id=37","http://ip-172-31-34-28.ec2.internal:4040/jobs/job?id=38","http://ip-172-31-34-28.ec2.internal:4040/jobs/job?id=39","http://ip-172-31-34-28.ec2.internal:4040/jobs/job?id=40","http://ip-172-31-34-28.ec2.internal:4040/jobs/job?id=41","http://ip-172-31-34-28.ec2.internal:4040/jobs/job?id=42","http://ip-172-31-34-28.ec2.internal:4040/jobs/job?id=43","http://ip-172-31-34-28.ec2.internal:4040/jobs/job?id=44","http://ip-172-31-34-28.ec2.internal:4040/jobs/job?id=45"],"interpreterSettingId":"spark"}},"apps":[],"jobName":"paragraph_1551181218349_-1629369491","id":"20190225-102802_1693329184","dateCreated":"2019-02-26T11:40:18+0000","dateStarted":"2019-02-26T11:47:06+0000","dateFinished":"2019-02-26T11:53:47+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:185"},{"text":"%pyspark\nmodel.validationMetrics","user":"anonymous","dateUpdated":"2019-02-26T11:53:47+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"[1.2255796511677142, 1.1713309592402645, 1.142693800122639, 1.1363575729117512, 1.1297209552629879]\n"}]},"apps":[],"jobName":"paragraph_1551181218349_1145211500","id":"20190226-103526_1579698655","dateCreated":"2019-02-26T11:40:18+0000","dateStarted":"2019-02-26T11:53:47+0000","dateFinished":"2019-02-26T11:53:47+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:186"},{"text":"%pyspark\nfor i in paramGrid:\n    print(i)","user":"anonymous","dateUpdated":"2019-02-26T12:03:53+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"{Param(parent=u'ALS_4992b123ef03082a0fa8', name='rank', doc='rank of the factorization'): 2}\n{Param(parent=u'ALS_4992b123ef03082a0fa8', name='rank', doc='rank of the factorization'): 5}\n{Param(parent=u'ALS_4992b123ef03082a0fa8', name='rank', doc='rank of the factorization'): 10}\n{Param(parent=u'ALS_4992b123ef03082a0fa8', name='rank', doc='rank of the factorization'): 15}\n{Param(parent=u'ALS_4992b123ef03082a0fa8', name='rank', doc='rank of the factorization'): 20}\n"}]},"apps":[],"jobName":"paragraph_1551181218350_-767466708","id":"20190226-105729_2145683406","dateCreated":"2019-02-26T11:40:18+0000","dateStarted":"2019-02-26T12:03:53+0000","dateFinished":"2019-02-26T12:03:53+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:187"},{"text":"%pyspark\nparams = [{p.name: v for p, v in m.items()} for m in model.getEstimatorParamMaps()]\nparams","user":"anonymous","dateUpdated":"2019-02-26T12:04:05+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"[{'rank': 2}, {'rank': 5}, {'rank': 10}, {'rank': 15}, {'rank': 20}]\n"}]},"apps":[],"jobName":"paragraph_1551181218350_1413986615","id":"20190226-105759_177850409","dateCreated":"2019-02-26T11:40:18+0000","dateStarted":"2019-02-26T12:04:05+0000","dateFinished":"2019-02-26T12:04:05+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:188"},{"text":"%pyspark\nfor i,ii in zip(model.validationMetrics, paramGrid):\n    print(i,\"|\",ii)","user":"anonymous","dateUpdated":"2019-02-26T12:03:50+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"(1.2255796511677142, '|', {Param(parent=u'ALS_4992b123ef03082a0fa8', name='rank', doc='rank of the factorization'): 2})\n(1.1713309592402645, '|', {Param(parent=u'ALS_4992b123ef03082a0fa8', name='rank', doc='rank of the factorization'): 5})\n(1.142693800122639, '|', {Param(parent=u'ALS_4992b123ef03082a0fa8', name='rank', doc='rank of the factorization'): 10})\n(1.1363575729117512, '|', {Param(parent=u'ALS_4992b123ef03082a0fa8', name='rank', doc='rank of the factorization'): 15})\n(1.1297209552629879, '|', {Param(parent=u'ALS_4992b123ef03082a0fa8', name='rank', doc='rank of the factorization'): 20})\n"}]},"apps":[],"jobName":"paragraph_1551181218351_143941794","id":"20190225-104000_102083695","dateCreated":"2019-02-26T11:40:18+0000","dateStarted":"2019-02-26T12:03:50+0000","dateFinished":"2019-02-26T12:03:50+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:189"},{"text":"%pyspark\n\\.transform(test)","user":"anonymous","dateUpdated":"2019-02-26T11:53:48+0000","config":{"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/python","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"ERROR","msg":[{"type":"TEXT","data":"Traceback (most recent call last):\n  File \"/tmp/zeppelin_pyspark-2395100223084959636.py\", line 364, in <module>\n    code = compile('\\n'.join(stmts), '<stdin>', 'exec', ast.PyCF_ONLY_AST, 1)\n  File \"<stdin>\", line 1\n    \\.transform(test)\n                    ^\nSyntaxError: unexpected character after line continuation character\n"}]},"apps":[],"jobName":"paragraph_1551181218352_-1110265298","id":"20190225-102920_53522624","dateCreated":"2019-02-26T11:40:18+0000","dateStarted":"2019-02-26T11:53:48+0000","dateFinished":"2019-02-26T11:53:48+0000","status":"ERROR","progressUpdateIntervalMs":500,"$$hashKey":"object:190"},{"text":"%md\n## maxitr\n","user":"anonymous","dateUpdated":"2019-02-26T11:50:40+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"editorMode":"ace/mode/markdown","editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<h2>maxitr</h2>\n</div>"}]},"apps":[],"jobName":"paragraph_1551181828564_-2009657160","id":"20190226-115028_474102590","dateCreated":"2019-02-26T11:50:28+0000","dateStarted":"2019-02-26T11:50:40+0000","dateFinished":"2019-02-26T11:50:40+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:191"},{"text":"%pyspark\nfrom pyspark.ml.tuning import ParamGridBuilder, TrainValidationSplit\nparamGrid = ParamGridBuilder()\\\n    .addGrid(als.maxIter , [10,50,100])\\\n    .build()\n    \ntvs = TrainValidationSplit(estimator=als,\n                           estimatorParamMaps=paramGrid,\n                           evaluator=rmse,\n                           # 80% of the data will be used for training, 20% for validation.\n                           trainRatio=0.8)   \n                           \nmodel = tvs.fit(training)","user":"anonymous","dateUpdated":"2019-02-26T12:13:13+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"editorMode":"ace/mode/python"},"settings":{"params":{},"forms":{}},"runtimeInfos":{"jobUrl":{"propertyName":"jobUrl","label":"SPARK JOB","tooltip":"View in Spark web UI","group":"spark","values":["http://ip-172-31-34-28.ec2.internal:4040/jobs/job?id=58","http://ip-172-31-34-28.ec2.internal:4040/jobs/job?id=59","http://ip-172-31-34-28.ec2.internal:4040/jobs/job?id=60","http://ip-172-31-34-28.ec2.internal:4040/jobs/job?id=61","http://ip-172-31-34-28.ec2.internal:4040/jobs/job?id=62","http://ip-172-31-34-28.ec2.internal:4040/jobs/job?id=63","http://ip-172-31-34-28.ec2.internal:4040/jobs/job?id=64","http://ip-172-31-34-28.ec2.internal:4040/jobs/job?id=65","http://ip-172-31-34-28.ec2.internal:4040/jobs/job?id=66","http://ip-172-31-34-28.ec2.internal:4040/jobs/job?id=67","http://ip-172-31-34-28.ec2.internal:4040/jobs/job?id=68","http://ip-172-31-34-28.ec2.internal:4040/jobs/job?id=69"],"interpreterSettingId":"spark"}},"apps":[],"jobName":"paragraph_1551182676903_1297729387","id":"20190226-120436_1972407510","dateCreated":"2019-02-26T12:04:36+0000","dateStarted":"2019-02-26T12:13:13+0000","dateFinished":"2019-02-26T12:07:42+0000","status":"RUNNING","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:192"},{"text":"%pyspark\n%pyspark\nfor i,ii in zip(model.validationMetrics, paramGrid):\n    print(i,\"|\",ii)","user":"anonymous","dateUpdated":"2019-02-26T11:51:58+0000","config":{"colWidth":12,"fontSize":9,"enabled":true,"results":{},"editorSetting":{"language":"python","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"editorMode":"ace/mode/python"},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1551181910265_-2036146761","id":"20190226-115150_732259784","dateCreated":"2019-02-26T11:51:50+0000","status":"READY","progressUpdateIntervalMs":500,"$$hashKey":"object:193"},{"text":"%md\n## Grid Search on the Rest Parameters","user":"anonymous","dateUpdated":"2019-02-26T11:40:18+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionKey":"TAB","completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<h2>Grid Search on the Rest Parameters</h2>\n</div>"}]},"apps":[],"jobName":"paragraph_1551181218352_945201637","id":"20190225-103418_585321352","dateCreated":"2019-02-26T11:40:18+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:194"},{"user":"anonymous","dateUpdated":"2019-02-26T11:40:18+0000","config":{"editorSetting":{"language":"scala","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/scala","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1551181218353_709088808","id":"20190225-103432_880808310","dateCreated":"2019-02-26T11:40:18+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:195"}],"name":"ml","id":"2E4K6YETK","noteParams":{},"noteForms":{},"angularObjects":{"md:shared_process":[],"spark:shared_process":[]},"config":{"isZeppelinNotebookCronEnable":false,"looknfeel":"default","personalizedMode":"false"},"info":{}}